p8105\_hw3\_yo2336
================
Yoo Rim Oh

# Problem 1

Load instacart data

``` r
data("instacart")

range(pull(instacart, aisle_id))
```

    ## [1]   1 134

``` r
count(instacart, aisle_id, aisle)
```

    ## # A tibble: 134 x 3
    ##    aisle_id aisle                          n
    ##       <int> <chr>                      <int>
    ##  1        1 prepared soups salads       2936
    ##  2        2 specialty cheeses           3873
    ##  3        3 energy granola bars        17449
    ##  4        4 instant foods               9917
    ##  5        5 marinades meat preparation  2905
    ##  6        6 other                       1795
    ##  7        7 packaged meat               1526
    ##  8        8 bakery desserts             1501
    ##  9        9 pasta sauce                 9736
    ## 10       10 kitchen supplies             448
    ## # ... with 124 more rows

``` r
aisle_df =
  instacart %>%
  count(aisle_id) %>%
  filter(n > 10000) %>%
  rename(number_ordered = n) %>%
  ggplot(aes(x = aisle_id, y = number_ordered)) +
  geom_point() +
  scale_x_continuous(
    breaks = c(0, 25, 50, 75, 100, 125))
```

Popular items

``` r
bake_ingr_df =
  instacart %>%
  select(product_name, aisle) %>%
  filter(aisle == "baking ingredients") %>%
  count(aisle, product_name) %>%
  arrange(desc(n)) %>%
  head(3) %>%
  mutate(rank = c(1, 2, 3)) %>%
  relocate(rank) %>%
  pivot_wider(
    names_from = "aisle",
    values_from = "product_name"
  ) %>%
  relocate(rank, "baking ingredients")

dog_food_care_df = 
  instacart %>%
  select(product_name, aisle) %>%
  filter(aisle == "dog food care") %>%
  count(aisle, product_name) %>%
  arrange(desc(n)) %>%
  head(3) %>%
  mutate(rank = c(1, 2, 3)) %>%
  pivot_wider(
    names_from = "aisle",
    values_from = "product_name"
  ) %>%
  relocate(rank, "dog food care")

pack_veg_fruit_df = 
  instacart %>%
  select(product_name, aisle) %>%
  filter(aisle == "packaged vegetables fruits") %>%
  count(aisle, product_name) %>%
  arrange(desc(n)) %>%
  head(3) %>%
  mutate(rank = c(1, 2, 3)) %>%
  relocate(rank) %>%
  pivot_wider(
    names_from = "aisle",
    values_from = "product_name"
  ) %>%
  relocate(rank, "packaged vegetables fruits")

popular_table_df = 
  left_join(bake_ingr_df, left_join(dog_food_care_df, pack_veg_fruit_df, by = "rank"), 
            by = "rank") %>%
  rename(count = c(n, n.x, n.y))

knitr::kable(popular_table_df, caption = "Top 3 Products Ordered from Selected Aisles")
```

| rank | baking ingredients | count1 | dog food care                                 | count2 | packaged vegetables fruits | count3 |
|-----:|:-------------------|-------:|:----------------------------------------------|-------:|:---------------------------|-------:|
|    1 | Light Brown Sugar  |    499 | Snack Sticks Chicken & Rice Recipe Dog Treats |     30 | Organic Baby Spinach       |   9784 |
|    2 | Pure Baking Soda   |    387 | Organix Chicken & Brown Rice Recipe           |     28 | Organic Raspberries        |   5546 |
|    3 | Cane Sugar         |    336 | Small Dog Biscuits                            |     26 | Organic Blueberries        |   4966 |

Top 3 Products Ordered from Selected Aisles
